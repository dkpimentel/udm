apt-get update -y && apt-get upgrade -y && apt-get dist-upgrade -y
apt-get install sudo
wget -qO ee rt.cx/ee && sudo bash ee
wget -qO wo wops.cc && sudo bash wo
apt-get install zip unzip


ee site create dominio.com --mysql
ee site update dominio.com --php7
apt-get install php7.0-intl
ee site update dominio.com --le

Excluir tudo dentro de uma pasta
rm -rf /home/user/Downloads/*

Acesso sftp

sftp -o port=22 root@ip

Voltando o Mautic:
apt-get intall zip unzip
ee site info dominio.com
mysql -p -u nome-de-usuario banco-de-dados < banco.sql
chown -R www-data:www-data /var/www/dominio.com/htdocs
chmod -R g+rw /var/www/dominio.com/htdocs


sudo nano /etc/ssh/sshd_config. 
Você pode usar qualquer porta não utilizada até 65535.Port 2222

Reiniciando o serviço de ssh
/etc/init.d/ssh restart


porta ssh e sftp alterada para 2222

Alterando os links do servidor
wp --allow-root search-replace --url=site.com http://site.com https://site.com --path=/var/www/site.com/htdocs


#Liberando acesso remoto para SSH
nano /etc/ssh/sshd_config
Altere a linha onde está o PermitRootLogin para:
PermitRootLogin yes
service sshd restart

#Alterando a senha root do mysql/mariadb
acesse o mysql/mariadb
mysql -u root
flush privileges;
ALTER USER 'root'@'localhost' IDENTIFIED BY 'nova-senha';

#Liberando acesso remoto para mysql/mariadb
Comentando o bind-addres
nano /etc/mysql/my.cnf

Acesse o mysql/mariadb
mysql -u root -p
use mysql;
update user set plugin='' where User='root';
grant all privileges on *.* to 'root'@'%' identified by 'sua senha';
flush privileges;
exit

service mysql restart

*******************
Criando backup de banco de dados
Fazendo o dump
mysqldump -h localhost -u USER -pSENHA meuBanco > backup_meuBanco.sql

Restaurando
mysql -h localhost -u USER -pSENHA meuBanco < meuBanco-20020924.sql

*******************
Script SH.

# Definindo parâmetros do MySql
echo " -- Definindo parametros do mysql ..."
DB_NAME='editora_emescam_br_SgKzcnJ7'
DB_USER='editoraemescG9oE'
DB_PASS='envwV45Qgf6ptHaIqcsMTXSd'
DB_PARAM='localhost'

# Definindo parâmetros do SISTEMA
echo " -- Definindo parametros do sistema ..."
DATE=`date +%Y-%m-%d`
MYSQLDUMP=mysqldump
BACKUP_DIR=/var/www/editora.emescam.br/htdocs/wp-content/bp
BACKUP_NAME=mysql-$DATE.sql
BACKUP_TAR=mysql-$DATE.tar

# Gerando arquivo sql
echo "  -- Gerando Backup da base de dados $DB_NAME em $BACKUP_DIR/$BACKUP_NAME ..."
$MYSQLDUMP -h $DB_PARAM -u $DB_USER -p$DB_PASS $DB_NAME > $BACKUP_DIR/$BACKUP_NAME


# Compactando arquivo em tar.bzip2 e removendo o .sql
echo "  -- Compactando arquivo em tar bzip2 ..."
tar -cjf $BACKUP_DIR/$BACKUP_TAR -C $BACKUP_DIR $BACKUP_NAME --remove-files

# Excluindo backups antigos
echo " -- Excluindo backups com mais de 10 dias ..."
find $BACKUP_DIR/* -mtime +5 -delete

# Acessando o diretorio.
cd /var/www/editora.emescam.br/htdocs/

# Adicionando no git
git add .
git commit -m 'Commit Automatico'

Crontab -e
0 0 */3 * * /bin/sh /var/www/site.com/Script_Backup_BD.sh >/dev/null 2>&1
#site para gerar cron => https://crontab-generator.org
#site com modelos de cron => https://www.hostinger.com.br/tutoriais/como-configurar-cron-jobs-no-linux/



